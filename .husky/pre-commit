#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸš€ Starting pre-commit checks..."

# Run lint-staged for code formatting and linting
echo "\nğŸ“ Running code formatting and linting..."
npx lint-staged || {
    echo "âŒ Code formatting and linting failed"
    exit 1
}

# Stage any changes made by lint-staged
echo "\nğŸ“¦ Staging any formatting changes..."
git add .

# Run tests without watching
echo "\nğŸ§ª Running tests..."
npm run test:ci || {
    echo "âŒ Tests failed"
    exit 1
}

echo "\nâœ… All checks passed!"
